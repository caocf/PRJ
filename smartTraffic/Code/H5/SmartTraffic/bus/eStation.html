<!doctype html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>电子站牌</title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link href="../css/mui.min.css" rel="stylesheet" />
		<link rel="stylesheet" href="../css/app.css" />
		<style>
			td {
				width: 25%;
				word-wrap: break-word;
				text-align: center;
			}
			
			tr {
				height: 30px;
				border-bottom: 1px #C7C7CC;
			}
			
			.frist p {
				color: #000000;
				font-size: 24px;
				text-align: center;
			}
			
			.frist {
				margin-top: 10px;
			}
			
			table {
				width: 100%;
				border: 0px;
			}
		</style>
	</head>

	<body>
		<header class="mui-bar mui-bar-nav">
			<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
			<h1 id="title" class="mui-title">电子站牌</h1>
		</header>
		<div class="mui-content">
			<div class="frist">
				<p id="line">1</p>
				<p id="station">2</p>
			</div>
			<div class="second">
				<table border="" cellspacing="" cellpadding="" id="table">
					<tr>
						<th>编号</th>
						<th>到站距离</th>
						<th>最近到达</th>
						<!--<th>行驶状态</th>-->
					</tr>
				</table>
			</div>
		</div>
		<footer>
		</footer>
		<script src="../js/mui.min.js"></script>
		<script type="text/javascript" src="../js/app.js"></script>
		<script type="text/javascript">
			mui.init();
			mui.ready(function() {
				var busList = JSON.parse(localStorage.busList);
				var line = JSON.parse(localStorage.line);
				console.log(busList)
				console.log(line)
				document.getElementById("line").innerHTML = line.lineName + "(" + line.str + ")";
				document.getElementById("station").innerText = line.stationName;
				var table = document.getElementById("table");
				var i = 0;
				for(; i < busList.length; i++) {
					var tr = document.createElement("tr");
					var td1 = document.createElement("td");
					td1.innerText = (i + 1);

					var td2 = document.createElement("td");
					td2.innerText = busList[i].Distance + "米/" + busList[i].StationIndex + "站";

					var td3 = document.createElement("td");
					td3.innerText = busList[i].StationName;

//					var td4 = document.createElement("td");
//					var state = "--"
//					if(busList[i].DriveState == 1) {
//						state = "<span style='color:#4CD964'>正常</span>"
//					}
//					if(busList[i].DriveState == 2) {
//						state = "<span style='color:#4CD964'>通畅</span>"
//					}
//					if(busList[i].DriveState == 3) {
//						state = "<span style='color:red'>拥堵</span>"
//					}
//
//					td4.innerHTML = state;
					tr.appendChild(td1);
					tr.appendChild(td2);
					tr.appendChild(td3);
//					tr.appendChild(td4);
					table.appendChild(tr);
				}
				if(line.time != null && line.time != "") {
					var tr = document.createElement("tr");
					var td1 = document.createElement("td");
					td1.innerText = (i + 1);

					var td2 = document.createElement("td");
					var str = line.time;
					if(str.indexOf(":") > 0) {
						str += "发车"
					}
					td2.innerText = str;

					var td3 = document.createElement("td");
					td3.innerText = "--";

//					var td4 = document.createElement("td");
//					td4.innerText = "--";
					tr.appendChild(td1);
					tr.appendChild(td2);
					tr.appendChild(td3);
//					tr.appendChild(td4);
					table.appendChild(tr);
				}
			});
		</script>
	</body>

</html>